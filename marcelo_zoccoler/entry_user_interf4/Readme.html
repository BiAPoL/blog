

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Custom user interfaces for Python (Part 4) &#8212; BiA-PoL blog</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'marcelo_zoccoler/entry_user_interf4/Readme';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Jamovi: statistical analysis made visual and easy (powered with R)" href="../jamovi/jamovi.html" />
    <link rel="prev" title="Custom user interfaces for Python (Part 3)" href="../entry_user_interf3/Readme.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../../_static/biapol_logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../_static/biapol_logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../intro.html">
                    Welcome!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Blog Posts</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../stefan_hahmann/elephant_server_installation_windows/readme.html">Installation of Elephant Server on Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stefan_hahmann/github_desktop_jupyter_notebook/readme.html">Running bio image analysis workflows on your machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../johannes_mueller/qtdesigner_and_magicgui/Readme.html">Best of both worlds: Combining Qt Designer and magicgui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mara_lampert/getting_started_with_mambaforge_and_python/readme.html">Getting started with Miniforge* and Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../till_korten/devbio-napari_cluster/readme.html">Using GPU-accelerated image processing on the TUD HPC cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../till_korten/devbio-napari_cluster_setup/readme.html">Setting up GPU-accelerated image processing on the TUD HPC cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../omero_scripts/readme.html">Running Deep-Learning Scripts in the BiA-PoL Omero Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mini_sabbatical_rike/Readme.html">Mini-Sabbatical Experience at Bia-PoL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../johannes_mueller/anaconda_getting_started/Readme.html">Getting started with Anaconda and Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../johannes_mueller/entry_sphinx/Readme.html">Automated package documentation with Sphinx</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../../johannes_mueller/entry_user_inter/Readme.html">Custom user interfaces for Python (Part 1)</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../johannes_mueller/entry_user_interf2/Readme.html">Custom user interfaces for Python (Part 2)</a></li>

<li class="toctree-l2"><a class="reference internal" href="../entry_user_interf3/Readme.html">Custom user interfaces for Python (Part 3)</a></li>

<li class="toctree-l2 current active"><a class="current reference internal" href="#">Custom user interfaces for Python (Part 4)</a></li>

</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../jamovi/jamovi.html">Jamovi: statistical analysis made visual and easy (powered with R)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../robert_haase/ms_build_tools/readme.html">Installing Microsoft buildtools on Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ryan_savill/principal_feature_analysis/readme.html">Principal Feature Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ryan_savill/03_background_subtraction/readme.html">Background Subtraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ryan_savill/02_intro_to_skimage/readme.html">Introduction to Image Analysis Basics in Python with Scikit Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../robert_haase/stardist_gpu/readme.html">Using StarDist in napari with GPU-support in Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ryan_savill/01_intro_to_python/readme.html">Introduction to Using Python for Image Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../robert_haase/cupy_cucim/readme.html">GPU-accelerated image processing using cupy and cucim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../robert_haase/browsing_idr/readme.html">Browsing the Open Microscopy Image Data Resource with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../robert_haase/clesperanto_google_colab/readme.html">GPU-accelerated image processing in the cloud using Google Colab and clEsperanto</a></li>


</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">About the Blog</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../robert_haase/why_we_blog/readme.html">Why we blog</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../people.html">BiA-PoL blog authors</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../mara_lampert/readme.html">Mara Lampert</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../stefan_hahmann/readme.html">Stefan Hahmann</a></li>


<li class="toctree-l2"><a class="reference internal" href="../../johannes_mueller/Readme.html">Johannes Müller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../readme.html">Marcelo Zoccoler</a></li>


<li class="toctree-l2"><a class="reference internal" href="../../ryan_savill/readme.html">Ryan Savill</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../robert_haase/readme.html">Robert Haase</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../imprint.html">Imprint</a></li>

</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/BiAPoL/blog" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/BiAPoL/blog/issues/new?title=Issue%20on%20page%20%2Fmarcelo_zoccoler/entry_user_interf4/Readme.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/marcelo_zoccoler/entry_user_interf4/Readme.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Custom user interfaces for Python (Part 4)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Custom user interfaces for Python (Part 4)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#turning-napari-gui-into-plugins">Turning napari GUI into plugins</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#table-of-contents">Table of contents</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-plugin-from-a-template-using-the-cookiecutter">Creating a plugin from a template using the cookiecutter</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-your-local-repository-to-github">Adding your local repository to Github</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#putting-your-gui-into-the-template">Putting your GUI into the template</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#updating-github-repository">Updating Github repository</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#publishing-your-plugin">Publishing your plugin</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#versioning">Versioning</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-source-files">Create source files</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upload-to-pypi">Upload to PyPi</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="custom-user-interfaces-for-python-part-4">
<h1>Custom user interfaces for Python (Part 4)<a class="headerlink" href="#custom-user-interfaces-for-python-part-4" title="Permalink to this heading">#</a></h1>
<p><a class="reference internal" href="../readme.html"><span class="doc std std-doc">Marcelo Zoccoler</span></a>, <a class="reference internal" href="../../johannes_mueller/Readme.html"><span class="doc std std-doc">Johannes Müller</span></a>, December 15th 2021, updated on July 20th 2022</p>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">#</a></h2>
<p>Graphical user interfaces (<em>GUIs</em>) are powerful tools to make your scripts and functions available to users that are not necessarily familiar with a lot of coding, development platforms (e.g. Spyder or PyCharm) - and shouldn’t be experienced programmers in order to use your tools.</p>
<p>In this blog, we will cover a few interesting and versatile methods for you to create customized <a class="reference external" href="https://qt.io">Qt</a>-based GUIs for Python in general. Since our work revolves mostly around the visualization and processing of <strong>images</strong>, we will also show you a few ways to create great user interfaces for <a class="reference external" href="https://napari.org/">napari</a>.</p>
<p>Blogs on this topic will cover:</p>
<ul class="simple">
<li><p><span class="xref myst">Getting started (Part 1)</span></p></li>
<li><p><span class="xref myst">Creating standalone GUIs (Part 2)</span></p></li>
<li><p><span class="xref myst">Creating GUIs for napari (Part 3)</span></p></li>
<li><p><span class="xref myst">Turning napari GUI into plugins (Part 4)</span></p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="turning-napari-gui-into-plugins">
<h1>Turning napari GUI into plugins<a class="headerlink" href="#turning-napari-gui-into-plugins" title="Permalink to this heading">#</a></h1>
<p>The <span class="xref myst">previous entry</span> showed you three different ways to create GUIs and embed them into napari locally. This forth and last part will teach you how to transform them into napari plugins! 🏝️ 🚀</p>
<section id="table-of-contents">
<h2>Table of contents<a class="headerlink" href="#table-of-contents" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><span class="xref myst">Creating a plugin template with cookiecutter</span></p></li>
<li><p><span class="xref myst">Adding your local repository to Github</span></p></li>
<li><p><span class="xref myst">Putting your GUI into the template</span></p></li>
<li><p><span class="xref myst">Updating Github repository</span></p></li>
<li><p><span class="xref myst">Publishing your plugin</span></p></li>
</ul>
</section>
<section id="creating-a-plugin-from-a-template-using-the-cookiecutter">
<h2>Creating a plugin from a template using the cookiecutter<a class="headerlink" href="#creating-a-plugin-from-a-template-using-the-cookiecutter" title="Permalink to this heading">#</a></h2>
<p>Well, first things first: <span class="xref myst">create a new conda environment</span>. (“Another one?” 😩) Yes, better safe than sorry 😉. Don’t forget to activate it.</p>
<p>The napari website has a complete <a class="reference external" href="https://napari.org/plugins/stable/for_plugin_developers.html">tutorial</a> for creating plugins, and I would say the easiest way is by using <a class="reference external" href="https://napari.org/plugins/stable/for_plugin_developers.html#cookiecutter-template">cookiecutter</a>.</p>
<p>So, let’s install and run the cookiecutter as suggested in the <a class="reference external" href="https://github.com/napari/cookiecutter-napari-plugin">template readme</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">cookiecutter</span>
<span class="n">cookiecutter</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">napari</span><span class="o">/</span><span class="n">cookiecutter</span><span class="o">-</span><span class="n">napari</span><span class="o">-</span><span class="n">plugin</span>
</pre></div>
</div>
<p>(<code class="docutils literal notranslate"><span class="pre">'pip'</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">recognized</span> <span class="pre">as</span> <span class="pre">...</span></code> ?? 🙀 -&gt; <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">pip</span></code> 😸)</p>
<p>(<code class="docutils literal notranslate"><span class="pre">'git'</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">installed.</span></code> ?? 🙀 -&gt; <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">git</span></code> 😸)</p>
<p>The cookiecutter will then start asking you questions about your project. We will answer them one by one, but here is an overview of all of them:</p>
<p>⚠️Spoiler alert⚠️
<img alt="" src="../../_images/cookiecutter_questions1.png" /></p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">full_name</span> <span class="pre">[Napari</span> <span class="pre">Developer]:</span></code> <em><strong>type your name</strong></em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">email</span> <span class="pre">[yourname&#64;example.com]:</span></code> <em><strong>type your email</strong>, so that people can reach you to talk about your new plugin</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">github_username_or_organization</span> <span class="pre">[githubuser]:</span></code> <em><strong>type your github username</strong> (if you don’t have a Github account, you should <a class="reference external" href="https://github.com/signup?ref_cta=Sign+up&amp;ref_loc=header+logged+out&amp;ref_page=%2F&amp;source=header-home">create one now</a>)</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plugin_name</span> <span class="pre">[napari-foobar]:</span></code> <em><strong>type your plugin name</strong> ex: ‘flood-napari’</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Select</span> <span class="pre">github_repository_url:</span></code><br />
<code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">-</span> <span class="pre">https://github.com/your_github_username/your_plugin_name</span></code><br />
<code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">-</span> <span class="pre">provide</span> <span class="pre">later</span></code><br />
<code class="docutils literal notranslate"><span class="pre">Choose</span> <span class="pre">from</span> <span class="pre">1,</span> <span class="pre">2</span> <span class="pre">[1]:</span></code>  <em><strong>type ‘1’</strong>, even if you did not create your repository yet, we’ll do that later</em><br />
<em>Obs: values or words inside square brackets <code class="docutils literal notranslate"><span class="pre">[]</span></code> are the default option if you just hit ‘Enter’</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">module_name</span> <span class="pre">[flood_napari]:</span></code> <em><strong>type your plugin module name</strong> (our plugin has a single module, ex: ‘flood_napari’)</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">short_description</span> <span class="pre">[A</span> <span class="pre">simple</span> <span class="pre">plugin</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">with</span> <span class="pre">napari]:</span></code> <em><strong>type a brief description of your plugin</strong></em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">include_reader_plugin</span> <span class="pre">[y]:</span></code> <em><strong>type ‘n’</strong>, because our example plugin is not a plugin for reading certain image file types</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">include_writer_plugin</span> <span class="pre">[y]:</span></code> <em><strong>type ‘n’</strong>, because our example plugin does not write anything</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">include_dock_widget_plugin</span> <span class="pre">[y]:</span></code> <em><strong>type ‘y’ or just hit ‘Enter’</strong>, because we want to dock our plugin to napari framework</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">include_function_plugin</span> <span class="pre">[y]:</span></code> <em><strong>type ‘n’ for this example</strong>, however it could be useful to organize functions into separate files</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">use_git_tags_for_versioning</span> <span class="pre">[n]:</span></code> <em><strong>hit ‘Enter’</strong></em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Select</span> <span class="pre">docs_tool:</span></code><br />
<code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">-</span> <span class="pre">mkdocs</span></code><br />
<code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">-</span> <span class="pre">sphinx</span></code><br />
<code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">-</span> <span class="pre">none</span></code><br />
<code class="docutils literal notranslate"><span class="pre">Choose</span> <span class="pre">from</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3</span> <span class="pre">[1]:</span></code> <em><strong>type ‘2’ for this example</strong>, check <a class="reference external" href="https://biapol.github.io/blog/johannes_mueller/entry_sphinx/">this post</a> to learn more about sphinx</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Select</span> <span class="pre">license:</span></code><br />
<code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">-</span> <span class="pre">BSD-3</span></code><br />
<code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">-</span> <span class="pre">MIT</span></code><br />
<code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">-</span> <span class="pre">Mozilla</span> <span class="pre">Public</span> <span class="pre">License</span> <span class="pre">2.0</span></code><br />
<code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">-</span> <span class="pre">Apache</span> <span class="pre">Software</span> <span class="pre">License</span> <span class="pre">2.0</span></code><br />
<code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">-</span> <span class="pre">GNU</span> <span class="pre">LGPL</span> <span class="pre">v3.0</span></code><br />
<code class="docutils literal notranslate"><span class="pre">6</span> <span class="pre">-</span> <span class="pre">GNU</span> <span class="pre">GPL</span> <span class="pre">v3.0</span></code><br />
<code class="docutils literal notranslate"><span class="pre">Choose</span> <span class="pre">from</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4,</span> <span class="pre">5,</span> <span class="pre">6</span> <span class="pre">[1]:</span></code> <em><strong>we like to use ‘1’</strong>, you can also change this later if you want, check options <a class="reference external" href="https://ufal.github.io/public-license-selector/">here</a></em></p></li>
</ol>
<p>Done! You will see the screen below with further instructions.</p>
<p><img alt="" src="../../_images/cookiecutter_questions2.png" /></p>
<p>We will just do instruction number 1 to install this default napari plugin locally:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">flood</span><span class="o">-</span><span class="n">napari</span>    <span class="c1"># replace &#39;flood-napari&#39; by your plugin name to go to the right directory</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span>   <span class="c1"># install your plugin locally</span>
</pre></div>
</div>
<p>Install napari in your environment (<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">napari[all]</span></code>) and run napari with <code class="docutils literal notranslate"><span class="pre">napari</span></code>.
When you go to the ‘Plugins’ menu now, you will see your plugin name there. Don’t worry now with the sub-menus, we will edit them afterwards.</p>
<p><img alt="" src="../../_images/napari_plugin1.png" /></p>
</section>
<section id="adding-your-local-repository-to-github">
<h2>Adding your local repository to Github<a class="headerlink" href="#adding-your-local-repository-to-github" title="Permalink to this heading">#</a></h2>
<p>We will use <a class="reference external" href="https://desktop.github.com/">Github Desktop</a> to publish our local repository into the Github page. It has a great user interface and integration. So first <a class="reference external" href="https://desktop.github.com/">download</a> and install Github Desktop. It should be a straight-forward <a class="reference external" href="https://docs.github.com/en/desktop/installing-and-configuring-github-desktop/installing-and-authenticating-to-github-desktop/installing-github-desktop">installation procedure</a>. If this is your first time using it, you will need to authenticate your account as explained <a class="reference external" href="https://docs.github.com/en/desktop/installing-and-configuring-github-desktop/installing-and-authenticating-to-github-desktop/authenticating-to-github">here</a>.</p>
<p>Now open it and let’s add your local repository by clicking on ‘File -&gt; Add local repository…’.</p>
<p><img alt="" src="../../_images/github_desktop1.png" /></p>
<p>After that, you have to specify your local plugin address. It should be a directory located where you were when you typed cookiecutter commands (typically ‘C:/Users/Your_user_name’ for Windows). It has the plugin name and the following contents:</p>
<img alt="directory_items" src="../../_images/directory_items.png" />
<p>Find it and click on ‘Add repository’. You will see that it now appears as the current repository and you will add it to Github.com by clicking on ‘Publish repository’.</p>
<p><img alt="" src="../../_images/github_desktop1b.png" /></p>
<p>Then a small window should pop-up. Specify the name of your repository (same name of your plugin, cookiecutter question 4) and click on ‘Publish Repository’.</p>
<p><img alt="" src="../../_images/github_desktop1c.png" /></p>
<p>Now, if you log in into your Github account through the browser and look at your repositories, you should see your new repository there, like this:</p>
<p><img alt="" src="../../_images/github_repo_page.png" /></p>
<p>Notice how the contents are the same as <span class="xref myst">the ones in your local folder</span>. Your template is online!</p>
</section>
<section id="putting-your-gui-into-the-template">
<h2>Putting your GUI into the template<a class="headerlink" href="#putting-your-gui-into-the-template" title="Permalink to this heading">#</a></h2>
<p>Now we will modify the code to add our widgets. In Github Desktop, let’s create a separate branch for your modifications. Click on the current branch, type a new branch name and click on ‘Create new branch’:</p>
<p><img alt="" src="../../_images/new_branch.png" /></p>
<p>Good, now all modifications will go into your new branch!</p>
<p>First, in order for our ‘qt designer version’ to work (see <a class="reference external" href="https://biapol.github.io/blog/marcelo_zoccoler/entry_user_interf3#importing-your-fancy-gui-to-napari">previous post</a>), we have to copy its interface (<code class="docutils literal notranslate"><span class="pre">flood_tool.py</span></code>, found <a class="reference external" href="https://github.com/BiAPoL/blog/blob/master/marcelo_zoccoler/entry_user_interf3/scripts/flood_tool.py">here</a>) to your local repository address (look for where you created your local version, something like <code class="docutils literal notranslate"><span class="pre">C:/Users/Your_user_name/flood-napari/src/flood_napari</span></code>).</p>
<p>Then, let’s replace the default <code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">Q</span> <span class="pre">Widget</span></code> and <code class="docutils literal notranslate"><span class="pre">example_magic_widget</span></code> by your GUI. With your favorite editor, open the file <code class="docutils literal notranslate"><span class="pre">_dock_widget.py</span></code> located in your local repository address. It should contain this code:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module is an example of a barebones QWidget plugin for napari</span>

<span class="sd">It implements the ``napari_experimental_provide_dock_widget`` hook specification.</span>
<span class="sd">see: https://napari.org/docs/dev/plugins/hook_specifications.html</span>

<span class="sd">Replace code below according to your needs.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">napari_plugin_engine</span> <span class="kn">import</span> <span class="n">napari_hook_implementation</span>
<span class="kn">from</span> <span class="nn">qtpy.QtWidgets</span> <span class="kn">import</span> <span class="n">QWidget</span><span class="p">,</span> <span class="n">QHBoxLayout</span><span class="p">,</span> <span class="n">QPushButton</span>
<span class="kn">from</span> <span class="nn">magicgui</span> <span class="kn">import</span> <span class="n">magic_factory</span>


<span class="k">class</span> <span class="nc">ExampleQWidget</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="c1"># your QWidget.__init__ can optionally request the napari viewer instance</span>
    <span class="c1"># in one of two ways:</span>
    <span class="c1"># 1. use a parameter called `napari_viewer`, as done here</span>
    <span class="c1"># 2. use a type annotation of &#39;napari.viewer.Viewer&#39; for any parameter</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">napari_viewer</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span> <span class="o">=</span> <span class="n">napari_viewer</span>

        <span class="n">btn</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Click me!&quot;</span><span class="p">)</span>
        <span class="n">btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_on_click</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">QHBoxLayout</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">()</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">btn</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_on_click</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;napari has&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewer</span><span class="o">.</span><span class="n">layers</span><span class="p">),</span> <span class="s2">&quot;layers&quot;</span><span class="p">)</span>


<span class="nd">@magic_factory</span>
<span class="k">def</span> <span class="nf">example_magic_widget</span><span class="p">(</span><span class="n">img_layer</span><span class="p">:</span> <span class="s2">&quot;napari.layers.Image&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;you have selected </span><span class="si">{</span><span class="n">img_layer</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="nd">@napari_hook_implementation</span>
<span class="k">def</span> <span class="nf">napari_experimental_provide_dock_widget</span><span class="p">():</span>
    <span class="c1"># you can return either a single widget, or a sequence of widgets</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">ExampleQWidget</span><span class="p">,</span> <span class="n">example_magic_widget</span><span class="p">]</span>
</pre></div>
</div>
<p>We will delete the <code class="docutils literal notranslate"><span class="pre">ExampleQWidget</span></code> and the <code class="docutils literal notranslate"><span class="pre">example_magic_widget</span></code> (I will also delete initial comments for clarity). We are left with this:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">napari_plugin_engine</span> <span class="kn">import</span> <span class="n">napari_hook_implementation</span>
<span class="kn">from</span> <span class="nn">qtpy.QtWidgets</span> <span class="kn">import</span> <span class="n">QWidget</span><span class="p">,</span> <span class="n">QHBoxLayout</span><span class="p">,</span> <span class="n">QPushButton</span>
<span class="kn">from</span> <span class="nn">magicgui</span> <span class="kn">import</span> <span class="n">magic_factory</span>

<span class="nd">@napari_hook_implementation</span>
<span class="k">def</span> <span class="nf">napari_experimental_provide_dock_widget</span><span class="p">():</span>
    <span class="c1"># you can return either a single widget, or a sequence of widgets</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">ExampleQWidget</span><span class="p">,</span> <span class="n">example_magic_widget</span><span class="p">]</span>
</pre></div>
</div>
<p>The function decorated with <code class="docutils literal notranslate"><span class="pre">&#64;napari_hook_implementation</span></code> appends its outputs to your plugin menu in napari. So, let’s add all 3 GUI versions of our flood widget before it. Although they all refer to the same function, for clarity, we will rename our <code class="docutils literal notranslate"><span class="pre">flood</span></code> function to 3 different versions: <code class="docutils literal notranslate"><span class="pre">flood_qt</span></code>, <code class="docutils literal notranslate"><span class="pre">flood_magic_factory</span></code> and <code class="docutils literal notranslate"><span class="pre">flood_fgui</span></code>. Also, we will rename the Qt class from <code class="docutils literal notranslate"><span class="pre">MainWindow</span></code> to <code class="docutils literal notranslate"><span class="pre">Qt_Designer_flood</span></code> and the <code class="docutils literal notranslate"><span class="pre">FunctionGui</span></code> class from <code class="docutils literal notranslate"><span class="pre">MyGui</span></code> to <code class="docutils literal notranslate"><span class="pre">FunctionGui_flood</span></code>.</p>
<p>Once we add them to the code (along with importing necessary libraries), it becomes like this:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">napari_plugin_engine</span> <span class="kn">import</span> <span class="n">napari_hook_implementation</span>
<span class="kn">from</span> <span class="nn">qtpy.QtWidgets</span> <span class="kn">import</span> <span class="n">QWidget</span><span class="p">,</span> <span class="n">QHBoxLayout</span><span class="p">,</span> <span class="n">QPushButton</span>
<span class="kn">from</span> <span class="nn">magicgui</span> <span class="kn">import</span> <span class="n">magic_factory</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Qt Designer version</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">skimage.io</span> <span class="kn">import</span> <span class="n">imread</span>
<span class="kn">from</span> <span class="nn">qtpy.QtWidgets</span> <span class="kn">import</span> <span class="n">QMainWindow</span>
<span class="kn">from</span> <span class="nn">qtpy</span> <span class="kn">import</span> <span class="n">uic</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="k">def</span> <span class="nf">flood_qt</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">delta</span><span class="p">):</span>
    <span class="n">new_level</span> <span class="o">=</span> <span class="n">delta</span><span class="o">*</span><span class="mi">85</span>
    <span class="n">label_image</span> <span class="o">=</span> <span class="n">image</span> <span class="o">&lt;=</span> <span class="n">new_level</span>
    <span class="n">label_image</span> <span class="o">=</span> <span class="n">label_image</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">*</span><span class="mi">13</span> <span class="c1"># label 13 is blue in napari</span>
    <span class="k">return</span><span class="p">(</span><span class="n">label_image</span><span class="p">,</span> <span class="n">new_level</span><span class="p">)</span>

<span class="c1"># Define the main window class</span>
<span class="k">class</span> <span class="nc">Qt_Designer_flood</span><span class="p">(</span><span class="n">QMainWindow</span><span class="p">,</span>  <span class="n">Ui_MainWindow</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">napari_viewer</span><span class="p">):</span>          <span class="c1"># include napari_viewer as argument (it has to have this name)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span> <span class="o">=</span> <span class="n">napari_viewer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">UI_FILE</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;flood_tool.ui&quot;</span><span class="p">)</span>  <span class="c1"># path to .ui file</span>
        <span class="n">uic</span><span class="o">.</span><span class="n">loadUi</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">UI_FILE</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>           <span class="c1"># load QtDesigner .ui file</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">label_layer</span> <span class="o">=</span> <span class="kc">None</span>                <span class="c1"># stored label layer variable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pushButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_apply_delta</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">_apply_delta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="s1">&#39;napari_island&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>    <span class="c1"># We use the layer name to find the correct image layer</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">doubleSpinBox</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="n">label</span><span class="p">,</span> <span class="n">level</span> <span class="o">=</span> <span class="n">flood_qt</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">delta</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_layer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewer</span><span class="o">.</span><span class="n">add_labels</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_layer</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">horizontalSlider</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
<span class="w">        </span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">magicgui version</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">magicgui</span> <span class="kn">import</span> <span class="n">magicgui</span>
<span class="kn">from</span> <span class="nn">napari.types</span> <span class="kn">import</span> <span class="n">ImageData</span><span class="p">,</span> <span class="n">LabelsData</span>
<span class="nd">@magic_factory</span><span class="p">(</span><span class="n">delta</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Temperature Increase (Δ°C):&#39;</span><span class="p">,</span> 
                                           <span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;step&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">},</span>
               <span class="n">new_level</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span><span class="s1">&#39;Sea Level (dm):&#39;</span><span class="p">,</span> <span class="s1">&#39;widget_type&#39;</span><span class="p">:</span><span class="s1">&#39;Slider&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span> <span class="p">:</span> <span class="mi">255</span><span class="p">,</span> <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
               <span class="n">auto_call</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">flood_magic_factory</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="n">ImageData</span><span class="p">,</span> <span class="n">delta</span><span class="p">:</span> <span class="nb">float</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">new_level</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LabelsData</span><span class="p">:</span> 
    <span class="n">new_level</span> <span class="o">=</span> <span class="n">delta</span><span class="o">*</span><span class="mi">85</span>
    <span class="n">label_image</span> <span class="o">=</span> <span class="n">image</span> <span class="o">&lt;=</span> <span class="n">new_level</span>
    <span class="n">label_image</span> <span class="o">=</span> <span class="n">label_image</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">*</span><span class="mi">13</span> <span class="c1"># label 13 is blue in napari</span>
    <span class="k">return</span><span class="p">(</span><span class="n">label_image</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">FunctionGui version</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">magicgui.widgets</span> <span class="kn">import</span> <span class="n">FunctionGui</span>
<span class="kn">from</span> <span class="nn">napari.types</span> <span class="kn">import</span> <span class="n">LayerDataTuple</span>
<span class="k">def</span> <span class="nf">flood_fgui</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="n">ImageData</span><span class="p">,</span> <span class="n">delta</span><span class="p">:</span> <span class="nb">float</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">new_level</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LayerDataTuple</span><span class="p">:</span> 
    <span class="n">new_level</span> <span class="o">=</span> <span class="n">delta</span><span class="o">*</span><span class="mi">85</span>
    <span class="n">label_image</span> <span class="o">=</span> <span class="n">image</span> <span class="o">&lt;=</span> <span class="n">new_level</span>
    <span class="n">label_image</span> <span class="o">=</span> <span class="n">label_image</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">*</span><span class="mi">13</span> <span class="c1"># label 13 is blue in napari</span>
    <span class="k">return</span><span class="p">((</span><span class="n">label_image</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;flood result&#39;</span><span class="p">,</span><span class="s1">&#39;metadata&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;new_level&#39;</span><span class="p">:</span><span class="n">new_level</span><span class="p">}}))</span>

<span class="k">class</span> <span class="nc">FunctionGui_flood</span><span class="p">(</span><span class="n">FunctionGui</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
          <span class="n">flood_fgui</span><span class="p">,</span>
          <span class="n">call_button</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
          <span class="n">auto_call</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
          <span class="n">layout</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span>
          <span class="n">param_options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;delta&#39;</span><span class="p">:</span>
                             <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Temperature Increase (Δ°C):&#39;</span><span class="p">,</span> 
                              <span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;step&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">},</span>
                        <span class="s1">&#39;new_level&#39;</span><span class="p">:</span>
                            <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span><span class="s1">&#39;Sea Level (dm):&#39;</span><span class="p">,</span> <span class="s1">&#39;widget_type&#39;</span><span class="p">:</span><span class="s1">&#39;Slider&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span> <span class="p">:</span> <span class="mi">255</span><span class="p">,</span> <span class="s1">&#39;enabled&#39;</span> <span class="p">:</span> <span class="kc">False</span><span class="p">}}</span>
        <span class="p">)</span>
        
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">label_image</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__call__</span><span class="p">()</span>
        <span class="n">new_level</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">label_image</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;metadata&#39;</span><span class="p">][</span><span class="s1">&#39;new_level&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_level</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">new_level</span>

<span class="nd">@napari_hook_implementation</span>
<span class="k">def</span> <span class="nf">napari_experimental_provide_dock_widget</span><span class="p">():</span>
    <span class="c1"># you can return either a single widget, or a sequence of widgets</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">ExampleQWidget</span><span class="p">,</span> <span class="n">example_magic_widget</span><span class="p">]</span>
</pre></div>
</div>
<p>Last thing is to replace <code class="docutils literal notranslate"><span class="pre">napari_experimental_provide_dock_widget</span></code> outputs by your own. In our case, it should look like this:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nd">@napari_hook_implementation</span>
<span class="k">def</span> <span class="nf">napari_experimental_provide_dock_widget</span><span class="p">():</span>
    <span class="c1"># you can return either a single widget, or a sequence of widgets</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">Qt_Designer_flood</span><span class="p">,</span> <span class="n">flood_magic_factory</span><span class="p">,</span> <span class="n">FunctionGui_flood</span><span class="p">]</span>
</pre></div>
</div>
<p>If you now start <code class="docutils literal notranslate"><span class="pre">napari</span></code> from the terminal again, your plugin, along with each of the 3 sub-menu versions, should be available and working!</p>
<p><img alt="" src="../../_images/flood_plugin_v1.png" /></p>
<p>Reminder: we wrote our qt_designer version to work with a specific layer name (<code class="docutils literal notranslate"><span class="pre">napari_island</span></code>). There are other ways of selecting the appropriated layer, like by order, type, etc, which will not be considered in this tutorial. You can have access to available layers through the viewer instance <code class="docutils literal notranslate"><span class="pre">viewer.layers</span></code>.</p>
</section>
<section id="updating-github-repository">
<h2>Updating Github repository<a class="headerlink" href="#updating-github-repository" title="Permalink to this heading">#</a></h2>
<p>You have your updates locally in your separate branch. Let’s push them into your Github repository. If you open Github Desktop again now, you should see all the changes we made listed in the left of the screen. Write a description to these changes (step 1.), click on ‘commit to ‘branch name’’ (step 2.), and then publish your new branch (step 3.):</p>
<p><img alt="" src="../../_images/flood_plugin_commit.png" /></p>
<p>After that, click on the ‘Create Pull Request’ button, and you will be prompted to a browser tab with your github online repository. There, click on ‘Create Pull Request’.</p>
<p><img alt="" src="../../_images/flood_plugin_PR.png" /></p>
<p>After the page updates itself, click on ‘Merge Pull Request’ and confirm it if required.</p>
<p><img alt="" src="../../_images/flood_plugin_merge.png" /></p>
<p>At the end, you should see the image below, which means your online repository is now updated with your new code!</p>
<p><img alt="merge_done" src="https://user-images.githubusercontent.com/26173597/145111544-dea73c05-a8a5-47bb-85c4-d9431ca0de0e.png" /></p>
</section>
<section id="publishing-your-plugin">
<h2>Publishing your plugin<a class="headerlink" href="#publishing-your-plugin" title="Permalink to this heading">#</a></h2>
<p>After you developed your plugin to a point where you think it’s ready to share it with the world, it’s time so submit it to the python package index (PyPI).
Publishing the plugin on <a class="reference external" href="https://pypi.org/">PyPi</a> may sound like a big ordeal, but is, in fact, very simple. To do so, first create an account on <a class="reference external" href="https://pypi.org/account/register/">PyPi</a>.</p>
<section id="versioning">
<h3>Versioning<a class="headerlink" href="#versioning" title="Permalink to this heading">#</a></h3>
<p>Let’s report the package’s version. We will update two files for that:</p>
<ol class="arabic simple">
<li><p>Go to your project repository and open the <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> file. On this file, at around the third line, you should find something like <code class="docutils literal notranslate"><span class="pre">version</span> <span class="pre">==</span> <span class="pre">0.0.1</span></code>. If you are releasing a newer version, replace <code class="docutils literal notranslate"><span class="pre">0.0.1</span></code> by your new version number. To know more about versioning standards, check <a class="reference external" href="https://py-pkgs.org/07-releasing-versioning.html#version-numbering">this post</a>.</p></li>
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">__inti__.py</span></code> located in the same folder where your plugin code resides - which in this example is flood-napari/src/flood_napari - update the version inside this file as well and save it. If you prefer, there are ways to <a class="reference external" href="https://py-pkgs.org/07-releasing-versioning.html#automatic-version-bumping">automate version bumping</a>.</p></li>
</ol>
<p>Now, remember to <span class="xref myst">update your Github repository</span> again (commit changes, push/publish branch, create Pull request, merge).</p>
<p>The last step of versioning is to provide a version tag. On the Github repository’s main page, at the right side, on Releases, click on “Create a new release” and the following page should load.</p>
<p><img alt="" src="../../_images/github_release.png" /></p>
<p>Fill the fields highlighted by green boxes and click on “Publish Release”.</p>
</section>
<section id="create-source-files">
<h3>Create source files<a class="headerlink" href="#create-source-files" title="Permalink to this heading">#</a></h3>
<p>After this is done, open an anaconda command prompt and <code class="docutils literal notranslate"><span class="pre">cd</span></code> into your project repository.</p>
<p>Next, you need to create the necessary packaging information from your sourcefiles. You can do so by either creating a <em>source distribution</em> of your package with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>setup.py<span class="w"> </span>sdist
</pre></div>
</div>
<p>or a <em>wheel</em> using</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>setup.py<span class="w"> </span>bdist_wheel
</pre></div>
</div>
<p>The difference between both is, in short, that the source distribution provides, as the name suggests, the source files that can be downloaded and have to be compiled upon installation of the package. Python wheels, on the contrary, come pre-built, which leads to faster installation. This can be convenient for large packages. For a more in-depth on the advantages of either strategy, see <a class="reference external" href="https://medium.com/ochrona/understanding-python-package-distribution-types-25d53308a9a">this blog</a>. For simple projects, there is no damage in simply providing both, like <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">sdist</span> <span class="pre">bdist_wheel</span> </code></p>
<p>A new folder should appear in your repository, called <code class="docutils literal notranslate"><span class="pre">dist</span></code>, with a couple files inside. Before uploading to PyPi, check if this folder contains only files related to the latest version. If files named after previous versions are present, you can manually delete them.</p>
</section>
<section id="upload-to-pypi">
<h3>Upload to PyPi<a class="headerlink" href="#upload-to-pypi" title="Permalink to this heading">#</a></h3>
<p>Lastly, upload your package to PyPi with <code class="docutils literal notranslate"><span class="pre">twine</span></code> (use <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">twine</span></code> if not present already):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">twine</span> <span class="n">upload</span> <span class="n">dist</span><span class="o">/*</span>
</pre></div>
</div>
<p>This will prompt you to enter your login credentials for PyPi in the command line and then upload your package to PyPi - congrats! For more information on building your package for publication on PyPi, see the <a class="reference external" href="https://packaging.python.org/en/latest/tutorials/packaging-projects/">official documentation.</a>. Your plugin should soon be available at the <a class="reference external" href="https://www.napari-hub.org/">Napari plugin hub</a>. It should also pop up as a notification in the <a class="reference external" href="https://napari.zulipchat.com/login/#narrow/stream/290453-hub-updates">napari zulib stream</a>, which is open to everyone.</p>
<p><em>Note</em>: If you do not feel confident with making your plugin public to the whole world <em>just yet</em>, you can upload your package to a <a class="reference external" href="https://test.pypi.org/">test version of PyPi</a> with the same login credentials using</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">twine</span> <span class="n">upload</span> <span class="o">--</span><span class="n">repository</span> <span class="n">testpypi</span> <span class="n">dist</span><span class="o">/*</span>
</pre></div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./marcelo_zoccoler/entry_user_interf4"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../entry_user_interf3/Readme.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Custom user interfaces for Python (Part 3)</p>
      </div>
    </a>
    <a class="right-next"
       href="../jamovi/jamovi.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Jamovi: statistical analysis made visual and easy (powered with R)</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Custom user interfaces for Python (Part 4)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#turning-napari-gui-into-plugins">Turning napari GUI into plugins</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#table-of-contents">Table of contents</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-plugin-from-a-template-using-the-cookiecutter">Creating a plugin from a template using the cookiecutter</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-your-local-repository-to-github">Adding your local repository to Github</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#putting-your-gui-into-the-template">Putting your GUI into the template</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#updating-github-repository">Updating Github repository</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#publishing-your-plugin">Publishing your plugin</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#versioning">Versioning</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-source-files">Create source files</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upload-to-pypi">Upload to PyPi</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Marcelo Zoccoler, Johannes Müller, Till Korten, Ryan Savill, Mara Lampert, Stefan Hahmann, Robert Haase, DFG Cluster of Excellence "Physics of Life", TU Dresden
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>